mkdir /DIPSY
cd /DIPSY
create DIPSY::DipoleEventHandler LHCEventHandler libDIPSY.so
create DIPSY::ImpactParameterGenerator stdBGenerator
set stdBGenerator:Width 7
set LHCEventHandler:BGen stdBGenerator
create DIPSY::SimpleProton stdProton
set stdProton:Particle /Defaults/Particles/p+
create DIPSY::VirtualPhoton virtualPhoton VirtualPhoton.so
set virtualPhoton:Q2 14.0
set virtualPhoton:Particle /Defaults/Particles/gamma
set LHCEventHandler:WFL virtualPhoton
#set LHCEventHandler:WFL stdProton
set LHCEventHandler:WFR stdProton
set stdProton:R 0.1
set stdProton:R0 2.9
set LHCEventHandler:PreSamples 10
create DIPSY::TotalXSecAnalysis TotXSec
insert LHCEventHandler:AnalysisHandlers[0] TotXSec
# create DIPSY::ElasticXSecAnalysis ElXSec ElasticXSecAnalysis.so
# set ElXSec:NBins 10000
# set ElXSec:DeltaB 0.005
# insert LHCEventHandler:AnalysisHandlers[0] ElXSec
#cp ElXSec ElXSec1
#set ElXSec1:DeltaB 0.01
#insert LHCEventHandler:AnalysisHandlers[0] ElXSec1
#cp ElXSec ElXSec2
#set ElXSec2:DeltaB 0.02
#insert LHCEventHandler:AnalysisHandlers[0] ElXSec2
#cp ElXSec ElXSec4
#set ElXSec4:DeltaB 0.04
#insert LHCEventHandler:AnalysisHandlers[0] ElXSec4

#create DIPSY::PT1DEmitter pt1DEmitter PT1DEmitter.so
#create DIPSY::OldStyleEmitter oldEmitter OldStyleEmitter.so
create DIPSY::Emitter stdEmitter
set stdEmitter:RScale 1.0
set stdEmitter:PTScale 1.0
set LHCEventHandler:Emitter stdEmitter
#create DIPSY::Swinger stdSwinger
create DIPSY::RecoilSwinger recSwinger RecoilSwinger.so
set recSwinger:Lambda 1.0
set LHCEventHandler:Swinger recSwinger
create DIPSY::SmallDipoleAbsorber stdAbsorber
# create DIPSY::LargePTDipoleAbsorber largePTAbsorber LargePTDipoleAbsorber.so
create DIPSY::EventFiller stdFiller
set stdFiller:DipoleAbsorber stdAbsorber
# set stdFiller:DipoleAbsorber largePTAbsorber
set LHCEventHandler:EventFiller stdFiller
create DIPSY::DipoleXSec stdXSec
set LHCEventHandler:XSecFn stdXSec
create ThePEG::FixedCMSLuminosity LHCLumi
set LHCLumi:Energy 2000.0
set LHCEventHandler:LuminosityFunction LHCLumi
set LHCEventHandler:LambdaQCD 0.25
set LHCEventHandler:RMax 2.8
set LHCEventHandler:NF 3
set LHCEventHandler:YFrametest 0.5
set LHCEventHandler:NColours 9
set LHCEventHandler:ShowHistory 0
create ThePEG::LWHFactory HFac LWHFactory.so
set HFac:StoreType flat
set HFac:Suffix dat
create ThePEG::MultiEventGenerator LHCGenerator MultiEventGenerator.so
set LHCGenerator:RandomNumberGenerator /Defaults/Random
set LHCGenerator:StandardModelParameters /Defaults/StandardModel
set LHCGenerator:EventHandler LHCEventHandler
set LHCGenerator:NumberOfEvents 1000
set LHCGenerator:PrintEvent 20
set LHCGenerator:DebugLevel 1
set  LHCGenerator:HistogramFactory HFac
# insert LHCGenerator:DefaultObjects[0] stdEmitter
# insert LHCGenerator:DefaultObjects[0] oldStyleEmitter
# insert LHCGenerator:DefaultObjects[0] pt1DEmitter
# do LHCGenerator:AddInterface /DIPSY/LHCEventHandler:Emitter /DIPSY/stdEmitter, /DIPSY/oldStyleEmitter, /DIPSY/pt1DEmitter
# do LHCGenerator:AddInterface /DIPSY/LHCEventHandler:PreSamples 250, 1000, 4000, 16000
saverun TestDIPSY LHCGenerator
