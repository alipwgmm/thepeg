cd /DIPSY

## First we setup some tuned parameters
#read CurrentTune.in
read Tune31.in

## Now we set up an event generator. We start with running pp rahter than pA.
cp EventHandler PAEventHandler
set PAEventHandler:WFL stdProton
set PAEventHandler:WFR stdProton
set PAEventHandler:ConsistencyLevel 0
set PAEventHandler:XSecFn:CheckOffShell false
set PAEventHandler:CascadeHandler NULL
set PAEventHandler:HadronizationHandler NULL
set PAEventHandler:DecayHandler NULL
create ThePEG::LuminosityFunction PALumi
set PAEventHandler:LuminosityFunction PALumi
cp Generator PAGenerator
set PAGenerator:EventHandler PAEventHandler
set PAGenerator:NumberOfEvents 0
set PAGenerator:EventHandler:EventFiller:PTCut 0.6
set PAGenerator:Path PAXSec
set PAEventHandler:BGen:Width 10
set PAEventHandler:EffectivePartonMode Colours

## These are the analysess we will run
## First the Glauber analyses
erase  PAEventHandler:AnalysisHandlers[0]
create DIPSY::GlauberAnalysis Glauber GlauberAnalysis.so
insert PAEventHandler:AnalysisHandlers[0] Glauber
## Some semi-inclusive cross section for DIPSY which need at least
## four combinations of left- and right-moving cascades. Also, it is
## typically efficient to sample a number of impact parameter values
## for each pair of DIPSY cascades.
set PAEventHandler:PreSampleL 10
set PAEventHandler:PreSampleR 2
set PAEventHandler:PreSampleB 10
## This is just to keep track of the progress of a run
create DIPSY::AnalysisProgress AnaLog AnalysisProgress.so
set AnaLog:Interval 600
insert PAEventHandler:AnalysisHandlers[0] AnaLog


## Set the pp energy we want to run with
do PAGenerator:AddInterface PAEventHandler:YFrametest 0.5, 0.9
set PAEventHandler:PreSamples 20
set PALumi:BeamEMaxA 100
set PALumi:BeamEMaxB 100
saverun PAtest01ppn PAGenerator
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 200
saverun PAtest02ppn PAGenerator
set PALumi:BeamEMaxA 500
set PALumi:BeamEMaxB 500
saverun PAtest05ppn PAGenerator
set PAEventHandler:EffectivePartonMode FastColours
saverun PAtest05ppN PAGenerator
set PAEventHandler:EffectivePartonMode FastColours
saverun PAtest05ppN2 PAGenerator
set PAEventHandler:EffectivePartonMode Colours
set PALumi:BeamEMaxA 900
set PALumi:BeamEMaxB 900
set PAEventHandler:PreSamples 2000
set stdProton:R0 0.0
set PAEventHandler:BaryonSize 2.9
saverun PAtest09ppn PAGenerator

set PAEventHandler:PreSamples 20
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 1000
saverun PAtest10ppn PAGenerator
set PALumi:BeamEMaxA 2000
set PALumi:BeamEMaxB 2000
saverun PAtest20ppn PAGenerator

set PAEventHandler:WFR Lithium
set PALumi:BeamEMaxA 100
set PALumi:BeamEMaxB 600
saverun PAtest01pLi PAGenerator
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 1200
saverun PAtest02pLi PAGenerator
set PALumi:BeamEMaxA 500
set PALumi:BeamEMaxB 3000
saverun PAtest05pLi PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 6000
saverun PAtest10pLi PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 12000
saverun PAtest20pLi PAGenerator

set PAEventHandler:WFR Oxygen
set PALumi:BeamEMaxA 100
set PALumi:BeamEMaxB 1600
saverun PAtest01pO PAGenerator
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 3200
saverun PAtest02pO PAGenerator
set PALumi:BeamEMaxA 500
set PALumi:BeamEMaxB 8000
saverun PAtest05pO PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 16000
saverun PAtest10pO PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 32000
saverun PAtest20pO PAGenerator

set PAEventHandler:WFR Copper
set PALumi:BeamEMaxA 100
set PALumi:BeamEMaxB 6300
saverun PAtest01pCun PAGenerator
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 12600
saverun PAtest02pCun PAGenerator
set PAEventHandler:PreSamples 2
saverun PAtest02pCunc PAGenerator
set PAEventHandler:PreSamples 20
set PAEventHandler:EffectivePartonMode FastColours
saverun PAtest02pCuN PAGenerator
set PAEventHandler:PreSamples 2
saverun PAtest02pCuNc PAGenerator
set PAEventHandler:PreSamples 20
set PAEventHandler:EffectivePartonMode FastColours2
saverun PAtest02pCuN2 PAGenerator
set PAEventHandler:PreSamples 2
saverun PAtest02pCuN2c PAGenerator
set PAEventHandler:PreSamples 20
set PAEventHandler:EffectivePartonMode Colours
set PALumi:BeamEMaxA 500
set PALumi:BeamEMaxB 31500
saverun PAtest05pCun PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 63000
saverun PAtest10pCun PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 126000
saverun PAtest20pCun PAGenerator

set PAEventHandler:WFR Lead
set PALumi:BeamEMaxA 100
set PALumi:BeamEMaxB 20800
saverun PAtest01pPbn PAGenerator
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 41600
saverun PAtest02pPbn PAGenerator
set PALumi:BeamEMaxA 500
set PALumi:BeamEMaxB 104000
saverun PAtest05pPbn PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 208000
saverun PAtest10pPbn PAGenerator
set PALumi:BeamEMaxA 1000
set PALumi:BeamEMaxB 416000
saverun PAtest20pPbn PAGenerator

do PAGenerator:RemoveInterface PAEventHandler:YFrametest
set PAEventHandler:YFrametest 0.5
set PAEventHandler:PreSamples 1
set PALumi:BeamEMaxA 200
set PALumi:BeamEMaxB 41600
saverun PAtest02pPb1 PAGenerator
set PAEventHandler:EffectivePartonMode Colours
saverun PAtest02pPb2 PAGenerator
saverun PAtest02pPb3 PAGenerator
