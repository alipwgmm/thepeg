mkdir /LesHouchesTest
cd /LesHouchesTest
library MadGraphReader.so

create ThePEG::MadGraphReader W1jets
# create ThePEG::LesHouchesFileReader W1jets
set W1jets:FileName LHCW1J.dat.gz
set W1jets:InitPDFs true
set W1jets:WeightWarnings false
# set W1jets:InitCuts true

cp W1jets W1jetsu
set W1jetsu:FileName LHCW1Ju.dat.gz
cp W1jets W0jets
set W0jets:FileName LHCW0J.dat.gz
cp W1jets W0jetsu
set W0jetsu:FileName LHCW0Ju.dat.gz

cp /LesHouches/LesHouchesHandler LesHouchesHandler


set LesHouchesHandler:StatLevel 2
set LesHouchesHandler:WarnPNum false
# set LesHouchesHandler:CascadeHandler /Pythia7/Handlers/Shower/StdShower
# set LesHouchesHandler:HadronizationHandler /Pythia7/Handlers/StringFrag/StdFragHandler
# set LesHouchesHandler:DecayHandler /Pythia7/Handlers/Decay/StdDecay

cp /Defaults/Generators/DefaultStrategy DefaultStrategy
cp /Defaults/Particles/p+ p+
cp /LHAPDF/CTEQ6ll CTEQ6
set CTEQ6:PDFName cteq6.LHpdf
set CTEQ6:RangeException Freeze
set p+:PDF CTEQ6
set pbar-:PDF CTEQ6
insert DefaultStrategy:LocalParticles[0] p+
insert DefaultStrategy:LocalParticles[0] pbar-

create ThePEG::Cuts NoCuts
cp NoCuts MaxCut
set MaxCut:YHatMax 0
cp NoCuts MinCut
set MinCut:YHatMin 0
set W1jets:Cuts NoCuts
set W0jets:Cuts NoCuts
set W1jetsu:Cuts NoCuts
set W0jetsu:Cuts NoCuts
cp W1jets W1jetsMax
cp W1jetsu W1jetsuMax
set W1jetsMax:Cuts MaxCut
set W1jetsuMax:Cuts MaxCut
cp W1jets W1jetsMin
cp W1jetsu W1jetsuMin
set W1jetsMin:Cuts MinCut
set W1jetsuMin:Cuts MinCut
cp W0jets W0jetsMax
cp W0jetsu W0jetsuMax
set W0jetsMax:Cuts MaxCut
set W0jetsuMax:Cuts MaxCut
cp W0jets W0jetsMin
cp W0jetsu W0jetsuMin
set W0jetsMin:Cuts MinCut
set W0jetsuMin:Cuts MinCut

insert LesHouchesHandler:LesHouchesReaders[0] W0jets
insert LesHouchesHandler:LesHouchesReaders[0] W0jetsu
insert LesHouchesHandler:LesHouchesReaders[0] W0jetsMin
insert LesHouchesHandler:LesHouchesReaders[0] W0jetsuMin
insert LesHouchesHandler:LesHouchesReaders[0] W0jetsMax
insert LesHouchesHandler:LesHouchesReaders[0] W0jetsuMax
insert LesHouchesHandler:LesHouchesReaders[0] W1jets
insert LesHouchesHandler:LesHouchesReaders[0] W1jetsu
insert LesHouchesHandler:LesHouchesReaders[0] W1jetsMin
insert LesHouchesHandler:LesHouchesReaders[0] W1jetsuMin
insert LesHouchesHandler:LesHouchesReaders[0] W1jetsMax
insert LesHouchesHandler:LesHouchesReaders[0] W1jetsuMax
set LesHouchesHandler:WeightOption 2

create ThePEG::XSecCheck targetXSec XSecCheck.so
set targetXSec:TargetXSec 67400
set targetXSec:Tolerance 0.05

cp /LesHouches/LesHouchesGenerator LesHouchesGenerator
set LesHouchesGenerator:Strategy DefaultStrategy
set LesHouchesGenerator:EventHandler LesHouchesHandler
set LesHouchesGenerator:NumberOfEvents 1000
set LesHouchesGenerator:DebugLevel 1
set LesHouchesGenerator:PrintEvent 10
insert LesHouchesGenerator:AnalysisHandlers[0] targetXSec
saverun LHETest LesHouchesGenerator

set LesHouchesHandler:WeightOption 1
makerun LHETest1 LesHouchesGenerator
run LHETest1

set NoCuts:X1Max 0.2
set NoCuts:X2Max 0.2
set MaxCut:X1Max 0.2
set MaxCut:X2Max 0.2
set MinCut:X1Max 0.2
set MinCut:X2Max 0.2
set W1jets:ReweightPDF true
set W1jetsu:ReweightPDF true
set W1jetsMax:ReweightPDF true
set W1jetsuMax:ReweightPDF true
set W1jetsMin:ReweightPDF true
set W1jetsuMin:ReweightPDF true
set W0jets:ReweightPDF true
set W0jetsu:ReweightPDF true
set W0jetsMax:ReweightPDF true
set W0jetsuMax:ReweightPDF true
set W0jetsMin:ReweightPDF true
set W0jetsuMin:ReweightPDF true

set LesHouchesHandler:WeightOption 2
set targetXSec:TargetXSec 49300
set LesHouchesGenerator:NumberOfEvents 1000
makerun LHETest2 LesHouchesGenerator
run LHETest2

set LesHouchesHandler:WeightOption 1
set LesHouchesGenerator:NumberOfEvents 1000
saverun LHETest3 LesHouchesGenerator
run LHETest3

set W1jets:CacheFileName W1jetsCache.gz
set W1jetsu:CacheFileName W1jetsuCache.gz
set W1jetsMax:CacheFileName W1jetsMaxCache.gz
set W1jetsuMax:CacheFileName W1jetsuMaxCache.gz
set W1jetsMin:CacheFileName W1jetsMinCache.gz
set W1jetsuMin:CacheFileName W1jetsuMinCache.gz
set W0jets:CacheFileName W0jetsCache.gz
set W0jetsu:CacheFileName W0jetsuCache.gz
set W0jetsMax:CacheFileName W0jetsMaxCache.gz
set W0jetsuMax:CacheFileName W0jetsuMaxCache.gz
set W0jetsMin:CacheFileName W0jetsMinCache.gz
set W0jetsuMin:CacheFileName W0jetsuMinCache.gz
set LesHouchesHandler:WeightOption 2

set LesHouchesGenerator:NumberOfEvents 1000
saverun LHETest4 LesHouchesGenerator
run LHETest4

set LesHouchesHandler:WeightOption 1

set LesHouchesGenerator:NumberOfEvents 1000
saverun LHETest5 LesHouchesGenerator
run LHETest5

