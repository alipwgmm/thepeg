mkdir LesHouches
cd LesHouches
library LesHouches.so
library MadGraphReader.so

cp /Defaults/Generators/DefaultStrategy DefaultStrategy
cp /Defaults/Particles/p+ p+
cp /Defaults/Partons/GRV94L GRV94L
set p+:PDF GRV94L
insert DefaultStrategy:LocalParticles[0] p+

create ThePEG::MadGraphReader pp2mumu
set pp2mumu:FileName pp2mumu.dat.gz

# create ThePEG::Cuts NoCuts
# set NoCuts:MHatMin 1
# set pp2mumu:Cuts NoCuts
do pp2mumu:ScanCuts
# Require the leptons to have eta between -7 and 7 to avoid remnant problems.
set pp2mumu/ExtractedCuts:MHatMin 1
set pp2mumu/etal:Cut 7
set pp2mumu:PDFA GRV94L
set pp2mumu:PDFB GRV94L

create ThePEG::LesHouchesEventHandler PP2mumu
insert PP2mumu:LesHouchesReaders[0] pp2mumu
cp /Defaults/Handlers/StandardExtractor QCDExtractor
set PP2mumu:PartonExtractor QCDExtractor
set PP2mumu:StatLevel 2

create ThePEG::EventGenerator MadTest
set MadTest:EventHandler PP2mumu
cp /Defaults/Random StdRandom
cp /Defaults/StandardModel StandardModel
cp /Defaults/AlphaS O1AlphaS
set StandardModel:QCD/RunningAlphaS O1AlphaS
set O1AlphaS:LambdaFlav 4
set O1AlphaS:LambdaQCD 0.2322
cp /Defaults/AlphaEM AlphaEM
set StandardModel:EW/RunningAlphaEM AlphaEM
cp /Defaults/CKM CKM
set StandardModel:EW/CKM CKM
set MadTest:RandomNumberGenerator StdRandom
set MadTest:StandardModelParameters StandardModel
set MadTest:Strategy DefaultStrategy
set MadTest:NumberOfEvents 100
set MadTest:DebugLevel 1
set MadTest:PrintEvent 10
saverun MadTest MadTest
